{% include components/header.html %}


{% assign itemtype = 'WebPage' %}
{% if page.categories contains 'article' %}
    {% assign itemtype = 'TechArticle' %}
{% elsif page.categories contains 'link'
      or page.categories contains 'note'
      or page.categories contains 'pen' %}
    {% assign itemtype = 'BlogPosting' %}
{% elsif page.categories contains 'talk' %}
    {% assign itemtype = 'PresentationDigitalDocument' %}
{% endif %}
<main class="wrap" role="main">
    <article class="content  h-entry" id="content" role="article" itemscope itemtype="https://schema.org/{{ itemtype }}">

        <h1 class="title" id="article" role="heading">
            <span class="p-name" itemprop="name">{{ page.title }}</span>
            {% if page.shorturl %}
                {% capture h1_href %}{{ page.shorturl | prepend: site.shorturl }}{% endcapture %}
                {% capture h1_title %}Permalink: {{ page.shorturl | prepend: site.shorturl }}{% endcapture %}
                {% assign h1_rel = 'me external' %}
                <!--{% include content/fragment-anchor.html href=h1_href title=h1_title rel=h1_rel %}-->
            {% endif %}
        </h1>

        {% include components/author.html %}

        <div class="meta">
            <time class="date  dt-published" datetime="{{ page.date | date_to_xmlschema }}">
                <span>published on</span>
                {% if page.url %}
                    <a class="u-url" href="{{ page.url | prepend: site.baseurl | prepend: site.url }}" title="Permalink: {{ page.url | prepend: site.baseurl | prepend: site.url }}" itemprop="datePublished">
                {% elsif page.shorturl %}
                    <a href="{{ page.shorturl | prepend: site.shorturl }}" title="Permalink: {{ page.shorturl | prepend: site.shorturl }}" rel="me external" itemprop="datePublished">
                {% else %}
                    <strong itemprop="datePublished">
                {% endif %}
                {{ page.date | date_to_long_string }}
                {% if page.url or page.shorturl %}
                    </a>
                {% else %}
                    </strong>
                {% endif %}
            </time>
            {% if page.tags.size > 0 %}
                {% assign tags_sorted = page.tags | sort %}
                <div class="tags">
                    <span>tagged under</span>
                    <span itemprop="keywords">
                        {% for tag in tags_sorted %}
                            {% unless forloop.first %}, {% endunless %}
                            <a class="p-category" href="/tags/#{{ tag | slugify }}" rel="tag">{{ tag }}</a>
                        {% endfor %}
                    </span>
                </div>
            {% endif %}
            {% if page.categories contains 'article' %}
                {% assign words = content | number_of_words %}
                <div class="reading-time">
                    <span>reading time</span>
                    {% if words < 250 %}
                        <strong>~1 min</strong>
                    {% else %}
                        <strong>~{{ words | divided_by: 250 }} mins</strong>
                    {% endif %}
                </div>
            {% elsif page.categories contains 'talk' and page.location %}
                <div class="location">
                    <span>given at</span>
                    {% if page.location_url %}
                        <a rel="external" href="{{ page.location_url }}">{{ page.location }}</a>
                    {% else %}
                        <strong>{{ page.location }}</strong>
                    {% endif %}
                </div>
            {% endif %}
            <div class="syndication">
                <span>also on</span>
                {% assign syndication_count = 0 %}
                {% for syndication in page.syndication %}
                    {% if syndication contains 'codepen.io' %}
                        {% assign syndication_slug = syndication | split: '/' | last %}
                        {% capture syndication_codepen %}<a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/pen/{{ syndication_slug }}">CodePen</a>
                                                         <small class="strong">
                                                             (<a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/details/{{ syndication_slug }}">Details</a>,
                                                             <a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/debug/{{ syndication_slug }}">Debug</a>)
                                                         </small>{% endcapture %}
                        }
                    {% elsif syndication contains 'gist.github.com' %}
                        {% capture syndication_gist %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">GitHub Gist</a>{% endcapture %}
                    {% elsif syndication contains 'github.com' or syndication contains 'github.io' %}
                        {% capture syndication_github %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">GitHub</a>{% endcapture %}
                    {% elsif syndication contains 'twitter.com' %}
                        {% capture syndication_twitter %}<a class="u-syndication" rel="syndication" href="{{ syndication }}">Twitter</a>
                                                         <small class="strong">
                                                             (<a rel="external" href="https://twitter.com/intent/like?tweet_id={{ syndication | split: '/' | last }}">Like</a>,
                                                             <a rel="external" href="https://twitter.com/intent/tweet?in_reply_to={{ syndication | split: '/' | last }}">Reply</a>,
                                                             <a rel="external" href="https://twitter.com/intent/retweet?tweet_id={{ syndication | split: '/' | last }}">Retweet</a>)
                                                         </small>{% endcapture %}
                    {% endif %}
                {% endfor %}
                {% if page.codepen_slug %}
                    <a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/pen/{{ page.codepen_slug }}">CodePen</a>
                    <small class="strong">
                        (<a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/details/{{ page.codepen_slug }}">Details</a>,
                        <a class="u-syndication" rel="syndication" href="{{ site.urls.codepen }}/debug/{{ page.codepen_slug }}">Debug</a>)
                    </small>
                {% endif %}
                {% if syndication_codepen %}
                    {% if syndication_count > 0 %},{% endif %}
                    {{ syndication_codepen }}
                    {% assign syndication_count = syndication_count | plus: 1 %}
                {% endif %}
                {% if syndication_gist %}
                    {% if syndication_count > 0 %},{% endif %}
                    {{ syndication_gist }}
                    {% assign syndication_count = syndication_count | plus: 1 %}
                {% endif %}
                {% if syndication_github %}
                    {% if syndication_count > 0 %},{% endif %}
                    {{ syndication_github }}
                    {% assign syndication_count = syndication_count | plus: 1 %}
                {% endif %}
                {% if page.speakerdeck_slug %}
                    {% if syndication_count > 0 %},{% endif %}
                    <a class="u-syndication" rel="syndication" href="{{ page.speakerdeck_slug | prepend: '/' | prepend: site.urls.speakerdeck }}">Speaker Deck</a>
                    {% assign syndication_count = syndication_count | plus: 1 %}
                {% endif %}
                {% if syndication_twitter %}
                    {% if syndication_count > 0 %},{% endif %}
                    {{ syndication_twitter }}
                    {% assign syndication_count = syndication_count | plus: 1 %}
                {% endif %}
                {% if page.vimeo_slug %}
                    {% if syndication_count > 0 %},{% endif %}
                    <a class="u-syndication" rel="syndication" href="{{ page.vimeo_slug | prepend: 'https://vimeo.com/' }}">Vimeo</a>
                    {% assign syndication_count = syndication_count | plus: 1 %}
                {% endif %}
                {% if page.youtube_slug %}
                    {% if syndication_count > 0 %},{% endif %}
                    <a class="u-syndication" rel="syndication" href="{{ page.youtube_slug | prepend: 'https://www.youtube.com/watch?v=' }}">YouTube</a>
                    {% assign syndication_count = syndication_count | plus: 1 %}
                {% endif %}
            </div>
            {% if page.categories contains 'pen' and page.codepen_featured == true %}
                <div class="featured">
                    <span>featured on</span>
                    <a rel="external" href="https://codepen.io/collection/hfqlg/">CodePen Homepage</a>
                </div>
            {% endif %}
        </div>

        {% include components/banner.html %}

        {% if page.lede %}
            <h2 class="lede  lede--featured" id="lede" itemprop="description">{{ page.lede }}</h2>
        {% endif %}

        {% if page.edit_text %}
            <div class="edit">
                {% if page.edit_date %}
                    <time datetime="{{ page.edit_date | date_to_xmlschema }}">Edited on {{ page.edit_date | date_to_long_string }}:</time>
                {% endif %}
                <p>{{ page.edit_text }}</p>
            </div>
        {% endif %}

        {% if page.external_url %}
            <nav class="buttons-list" role="navigation">
                {% assign url = page.external_url.url | default: page.external_url %}
                {% assign url_root = url | remove: 'http://' | remove: 'https://' | split: '/' | first %}
                {% assign title = page.external_url.title | default: url_root %}
                <a class="button" href="{{ url }}" rel="external">{{ title }}</a>
            </nav>
        {% endif %}

        <div class="content__body  e-content">
            {{ content }}
        </div>

        {% if page.endnotes %}
            {% include content/heading.html title='Endnotes' %}
            <ol>
                {% for note in page.endnotes %}
                    <li class="endnote" id="endnote-{{ forloop.index }}">
                        {{ note }}
                        <a href="#note-{{ forloop.index }}" class="endnote-anchor" title="">↩︎</a>
                    </li>
                {% endfor %}
            </ol>
        {% endif %}

        {% if page.further_reading %}
            {% include content/heading.html title='Further Reading' %}
            <ul>
                {% for link in page.further_reading %}
                    {% assign url = link.url %}
                    {% if url contains site.url %}
                        {% assign rel = '' %}
                    {% else %}
                        {% assign rel = ' rel="external"' %}
                    {% endif %}
                    {% if link.title == null or link.title == empty %}
                        {% assign title = url %}
                    {% else %}
                        {% assign title = link.title %}
                    {% endif %}
                    <li>
                        <a href="{{ url }}"{{ rel }}>{{ title }}</a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}

        {% include components/nav-secondary.html type='archives' include=page.categories.first %}

        {% include components/webmentions.html %}
        {% include components/comments.html %}

        {% if page.categories contains 'article' %}
            {% include components/widget-latest-articles.html %}
        {% elsif page.categories contains 'link' %}
            {% include components/widget-latest-links.html %}
        {% elsif page.categories contains 'note' %}
            <!--{% include components/widget-latest-notes.html %}-->
        {% elsif page.categories contains 'pen' %}
            {% include components/widget-latest-pens.html %}
        {% elsif page.categories contains 'talk' %}
            <!--{% include components/widget-latest-talks.html %}-->
        {% endif %}

    </article>
</main>


{% include components/footer.html %}

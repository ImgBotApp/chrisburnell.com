function initSearch(){getParameterByName("query")&&(query=decodeURIComponent(getParameterByName("query")),searchInput.value=query,execSearch(query)),query=searchInput.value,searchContainer&&searchForm.addEventListener?searchForm.addEventListener("submit",submitCallback,!1):searchContainer&&searchForm.attachEvent&&searchForm.attachEvent("onsubmit",submitCallback)}function submitCallback(e){e.preventDefault(),query=searchInput.value,execSearch(query)}function execSearch(e){(""!=e||allowEmpty)&&getSearchResults()}function getSearchResults(){var e=new XMLHttpRequest;e.open("GET",jsonFeedUrl,!0),e.onload=function(){if(e.status>=200&&e.status<400){var t=JSON.parse(e.responseText);processData(t)}},e.onerror=function(){},e.send()}function processData(e){n=[];for(var t=0,n="",r=0;r<e.length;r++){var a=e[r];if(a.title.toLowerCase().indexOf(query.toLowerCase())>-1||a.content.toLowerCase().indexOf(query.toLowerCase())>-1||a.introduction.toLowerCase().indexOf(query.toLowerCase())>-1||a.categories.toLowerCase().indexOf(query.toLowerCase())>-1||a.tags.toLowerCase().indexOf(query.toLowerCase())>-1){if(a.categories)if(a.categories.toLowerCase().indexOf("article")>-1)var s=populateResultContent(resultTemplateArticle.innerHTML,a);else var s=populateResultContent(resultTemplatePen.innerHTML,a);else var s=populateResultContent(resultTemplatePage.innerHTML,a);t++,n+=s}}populateResultsString(t),showSearchResults(n)}function showSearchResults(e){resultsList.innerHTML=e}function populateResultContent(e,t){return e=injectContent(e,t.link,"@@url@@"),e=injectContent(e,t.title,"@@title@@"),e=injectContent(e,t.date,"@@date@@"),e=injectContent(e,t.date_friendly,"@@date_friendly@@"),e=injectContent(e,t.introduction,"@@introduction@@")}function populateResultsString(e){var t=e>1?"s":"",n="<em>"+e+"</em> result"+t+" found for <q>"+query+"</q>";resultsMeta.innerHTML=n}function getParameterByName(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))}function injectContent(e,t,n){var r=new RegExp(n,"g");return e.replace(r,t)}var query,jsonFeedUrl="../search.json",searchContainer=document.getElementById("search"),searchForm=document.getElementById("search-form"),searchInput=document.getElementById("search-input"),searchSubmit=document.getElementById("search-submit"),resultsMeta=document.getElementById("search-meta"),resultsList=document.getElementById("search-results-list"),resultTemplatePage=document.getElementsByClassName("search-template-page")[0],resultTemplateArticle=document.getElementsByClassName("search-template-article")[0],resultTemplatePen=document.getElementsByClassName("search-template-pen")[0],allowEmpty=!1;initSearch(),searchInput.disabled=!1,searchSubmit.disabled=!1;
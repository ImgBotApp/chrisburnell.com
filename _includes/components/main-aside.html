{% if page.layout == 'post' %}
    {% assign author_name_prefix = 'by' %}
    {% assign author_microdata_tags = '' %}
    {% assign author_microdata_photo = '' %}
    {% capture author_microdata_name %}<span class="canada  fn" rel="author" itemprop="author">{{ site.author.name }}</span>{% endcapture %}
    {% capture author_microdata_nationality %}<span class="canada">Canadian</span>{% endcapture %}
    {% assign author_microdata_job_title = site.author.job_title %}
    {% assign author_microdata_home_location = site.author.location %}
    {% capture author_microdata_works_for %}<a rel="external" href="{{ site.author.employer.url }}">{{ site.author.employer.name }}</a>{% endcapture %}
    {% capture author_information_details %}
        <time class="date" datetime="{{ page.date | date_to_xmlschema }}">
            on
            {% if page.shorturl %}
                <a href="{{ page.shorturl | prepend: site.shorturl }}" title="Permalink: {{ page.shorturl | prepend: site.shorturl }}" rel="me" itemprop="datePublished">
            {% else %}
                <strong itemprop="datePublished">
            {% endif %}
            {{ page.date | date: '%d %b, %Y' }}
            {% if page.shorturl %}
                </a>
            {% else %}
                </strong>
            {% endif %}
        </time>
        {% if page.tags.size > 0 %}
            <div class="tags">
                <span>tagged under</span>
                <span itemprop="keywords">
                    {% assign tags_sorted = page.tags | sort: 0 %}
                    {% for tag in tags_sorted %}
                        {% if forloop.last and tags_sorted.size > 1 %} and {% endif %}<a href="/tags/#{{ tag | slugify }}" rel="tag">{{ tag }}</a>{% if forloop.last == false and tags_sorted.size > 2 %}, {% endif %}
                    {% endfor %}
                </span>
            </div>
        {% endif %}
        {% if page.categories contains 'article' %}
            <div class="reading-time">
                {% assign words = content | number_of_words %}
                {% if words < 360 %}
                    <strong>1 min</strong>
                {% else %}
                    <strong>{{ words | divided_by: 180 }} mins</strong>
                {% endif %}
                <span>reading time</span>
            </div>
        {% elsif page.categories contains 'link' %}
            <a class="related-anchor" href="/links/">All Featured Links</a>
        {% elsif page.categories contains 'pen' %}
            <a class="related-anchor" href="/pens/">All Featured Pens</a>
        {% elsif page.categories contains 'talk' %}
            {% if page.location %}
                {% if page.location_url %}
                    <div class="location">
                        <span>given at</span>
                        <a rel="external" href="{{ page.location_url }}">{{ page.location }}</a>
                    </div>
                {% else %}
                    <div class="location">
                        <span>given at</span>
                        <strong>{{ page.location }}</strong>
                    </div>
                {% endif %}
            {% endif %}
            <a class="related-anchor" href="/talks/">Latest Talks</a>
        {% endif %}
    {% endcapture %}
{% elsif page.layout == 'page' %}
    {% assign author_name_prefix = 'about' %}
    {% capture author_microdata_tags %} itemscope itemtype="https://schema.org/Person"{% endcapture %}
    {% capture author_microdata_photo %} itemprop="photo"{% endcapture %}
    {% capture author_microdata_name %}<span class="canada" itemprop="name">{{ site.author.name }}</span>{% endcapture %}
    {% capture author_microdata_nationality %}<span class="canada" itemprop="nationality">Canadian</span>{% endcapture %}
    {% capture author_microdata_job_title %}<span itemprop="jobTitle">{{ site.author.job_title }}</span>{% endcapture %}
    {% capture author_microdata_home_location %}<span itemprop="homeLocation">{{ site.author.location }}</span>{% endcapture %}
    {% capture author_microdata_works_for %}<a rel="external" href="{{ site.author.employer.url }}"><span itemprop="worksFor">{{ site.author.employer.name }}</span></a>{% endcapture %}
    {% capture author_information_details %}
        <div class="author-nationality">I’m <strong class="canada">{{ site.author.nationality }}</strong></div>
        <div class="author-employer">I’m a <strong>{{ site.author.job_title }}</strong></div>
    {% endcapture %}
{% endif %}


{% if page.page_class contains 'about' %}
    {% assign author_biography_closer = 'you don’t care about my life. Sorry.' %}
{% elsif page.page_class contains 'articles' %}
    {% assign author_biography_closer = 'my whimsical articles don’t capture your child-like wonder' %}
{% elsif page.categories contains 'article' %}
    {% assign author_biography_closer = 'this article is boring and makes you want to claw your eyeballs out' %}
{% elsif page.page_class contains 'links' %}
    {% assign author_biography_closer = 'my taste in websites makes you hate me a little bit' %}
{% elsif page.categories contains 'link' %}
    {% assign author_biography_closer = 'you’d really rather just be click that link' %}
{% elsif page.page_class contains 'pens' %}
    {% assign author_biography_closer = 'my whimsical pens don’t capture your child-like wonder' %}
{% elsif page.categories contains 'pen' %}
    {% assign author_biography_closer = 'this pen is uninspiring and makes you want to claw your eyeballs out' %}
{% elsif page.page_class contains 'talks' %}
    {% assign author_biography_closer = 'my talks make you long for your childhood, when the burdens of language comprehension laid on the shoulders of others' %}
{% elsif page.categories contains 'talk' %}
    {% assign author_biography_closer = 'this talk sounds like broken nails on a chalkboard' %}
{% elsif page.page_class contains 'tags' %}
    {% assign author_biography_closer = 'my whimsical articles and pens don’t capture your child-like wonder' %}
{% elsif page.page_class contains 'search' %}
    {% assign author_biography_closer = 'everything you search for looks totally boring' %}
{% elsif page.page_class contains 'not-found' or page.page_class contains 'offline' %}
    {% assign author_biography_closer = 'you’re upset that you found a broken page. Sorry' %}
{% else %}
    {% assign author_biography_closer = 'this page makes you wish you were doing something else, like folding socks' %}
{% endif %}


<aside class="author  vcard" role="complementary"{{ author_microdata_tags }}>

    <div class="clear  author-information">
        <a rel="me" class="author-image  canada" href="/about/" title="About me" tabindex="-1">
            <picture>
                <source srcset="/images/avatar.webp 1x,
                                /images/avatar@2x.webp 2x,
                                /images/avatar@4x.webp 4x"
                        type="image/webp">
                <img alt="Photo of me" class="photo"
                     src="/images/avatar.png"
                     srcset="/images/avatar@2x.png 2x,
                             /images/avatar@4x.png 4x"
                     role="presentation"{{ author_microdata_photo }}>
            </picture>
        </a>
        <div class="author-name">{{ author_name_prefix }} <a rel="me" class="url" href="/about/" tabindex="-1">{{ author_microdata_name }}</a></div>

        {{ author_information_details }}
    </div>

    <div class="author-biography">
        <p>I’m a {{ author_microdata_nationality }} {{ author_microdata_job_title }} living in {{ author_microdata_home_location }} and working at {{ author_microdata_works_for }}. Driven by a passion for lean CSS and a semantic web, I love to create rich and engaging user experiences, which I write about on this website—<a rel="me author" href="/feed.xml">subscribe if you’d like</a>.</p>
        <p>I also <a rel="me publisher external" href="{{ site.urls.twitter }}">tweet</a>, <a rel="me publisher external" href="{{ site.urls.codepen }}">write code</a>, <a rel="me publisher external" href="{{ site.github.owner_url }}">commit code</a>, <a rel="me publisher external" href="{{ site.urls.spotify }}">listen to music</a>, and <a rel="me publisher external" href="//recipes.chrisburnell.com">bake bread</a> if {{ author_biography_closer }}.</p>
    </div>

    {% unless page.page_class contains 'search' %}
        {% include components/widget-search.html %}
    {% endunless %}

</aside>

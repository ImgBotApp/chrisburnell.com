---
layout: null
searchable: true
---

{% assign first = true %}
[
{% for page in site.pages %}
    {% unless page.title == null or page.title == empty or page.searchable == false %}
        {% unless first %},{% endunless %}{
            "type": "page",
            "title": {{ page.title | replace: "’", "'" | replace: "–", "-" | jsonify }},
            "link": {{ page.url | replace: 'index.html', '' | prepend: site.baseurl | prepend: site.url | jsonify }},
            "introduction": {{ page.description | strip_html | replace: "’", "'" | replace: "—", "--" | jsonify }}{% unless page.searchable == "no-content" %},
            "content": {{ page.content | strip_html | replace: "’", "'" | replace: "–", "-" | replace: "—", "--" | jsonify }}{% endunless %}
        }{% assign first = false %}
    {% endunless %}
{% endfor %}
{% for post in site.posts %}
    {% unless post.title == null or post.title == empty or post.searchable == false %}
        {% unless first %},{% endunless %}{
            "type": "{% if post.categories contains "pen" %}pen{% else %}article{% endif %}",
            "title": {{ post.title | replace: "’", "'" | replace: "–", "-" | jsonify }},
            "link": {{ post.url | prepend: site.baseurl | prepend: site.url | jsonify }},
            "date": {{ post.date | jsonify }},
            "date_friendly": {{ post.date | date: "%d %b, %Y" | jsonify }},{% if post.introduction %}
            "introduction": {{ post.introduction | truncatewords: 15 |  replace: '....', '...' |  replace: ',...', '...' | strip_html | replace: "’", "'" | replace: "—", "--" | jsonify }},{% endif %}
            "categories": {{ post.categories | join:', ' | jsonify }},
            "tags": {{ post.tags | join:', ' | jsonify }}{% unless post.searchable == "no-content" %},
            "content": {{ post.content | strip_html | replace: "’", "'" | replace: "–", "-" | replace: "—", "--" | jsonify }}{% endunless %}
        }{% assign first = false %}
    {% endunless %}
{% endfor %}
]